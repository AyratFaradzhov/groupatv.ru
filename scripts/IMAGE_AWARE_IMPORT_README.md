# üñºÔ∏è IMAGE-AWARE PRODUCT INGESTION FRAMEWORK

## –û–ø–∏—Å–∞–Ω–∏–µ

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º. –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∏–º–ø–æ—Ä—Ç–∞ —Å–ª—É–∂–µ–±–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –¥—É–±–ª–µ–π –∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É–ø–∞–∫–æ–≤–æ–∫ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤.

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### ‚ùå –ù–ï "1 —Ñ–∞–π–ª = 1 –ø—Ä–æ–¥—É–∫—Ç"
### ‚ùå –ù–ï "1 –ø–∞–ø–∫–∞ = 1 –ø—Ä–æ–¥—É–∫—Ç" (–Ω–µ –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–Ω–æ)
### ‚úÖ –ì–†–£–ü–ü–ò–†–û–í–ö–ê ‚Üí –í–ê–õ–ò–î–ê–¶–ò–Ø ‚Üí –°–û–ó–î–ê–ù–ò–ï

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –≠–¢–ê–ü 1: –ì–†–£–ü–ü–ò–†–û–í–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–π —Å—Ö–æ–∂–µ—Å—Ç–∏

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –°–∫–∞–Ω–∏—Ä—É–µ–º `foods/` —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
2. –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞–ø–∫–∏ —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ `.webp` —Ñ–∞–π–ª—ã
3. –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ perceptual hash (–≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–æ–∂–µ—Å—Ç—å)
4. –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏ (hash > 0.85) ‚Üí –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
5. –í—ã–±–∏—Ä–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∫—É—Ä—Å)

**–ü—Ä–∏–º–µ—Ä:**
```
1753 –ö–∏—Å–ª—ã–µ –†–µ–º–µ—à–∫–∏ ( –ê—Ä–±—É–∑ )/
  ‚îú‚îÄ‚îÄ 1753 –ê—Ä–±—É–∑ 1.webp (phash: abc123)
  ‚îú‚îÄ‚îÄ 1753 –ê—Ä–±—É–∑ 2.webp (phash: abc125) ‚Üê –ø–æ—Ö–æ–∂ –Ω–∞ abc123 (0.92)
  ‚îî‚îÄ‚îÄ –£–ø–∞–∫–æ–≤–∫–∞.webp (phash: xyz789) ‚Üê –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è (0.3)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ì—Ä—É–ø–ø–∞ 1: [1753 –ê—Ä–±—É–∑ 1, 1753 –ê—Ä–±—É–∑ 2] ‚Üí –û–î–ò–ù –ø—Ä–æ–¥—É–∫—Ç
- –ì—Ä—É–ø–ø–∞ 2: [–£–ø–∞–∫–æ–≤–∫–∞] ‚Üí –º–æ–∂–µ—Ç –±—ã—Ç—å —á–∞—Å—Ç—å—é –≥—Ä—É–ø–ø—ã 1 –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç score)

### –≠–¢–ê–ü 2: –í–ê–õ–ò–î–ê–¶–ò–Ø –ì–†–£–ü–ü–´

–ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –ø–æ 4 –∫—Ä–∏—Ç–µ—Ä–∏—è–º:

#### 1. –°–¢–†–£–ö–¢–£–†–ù–´–ô –ê–ù–ê–õ–ò–ó (30% –≤–µ—Å–∞)
- ‚úÖ –ì–ª—É–±–∏–Ω–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ 3-5 —É—Ä–æ–≤–Ω–µ–π)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—É—Ç–∏ (–±—Ä–µ–Ω–¥ ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø–µ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ 2-5)

#### 2. –°–ï–ú–ê–ù–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó (25% –≤–µ—Å–∞)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–∞ –∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–º–∞—Ä–º–µ–ª–∞–¥, –∫–æ–Ω—Ñ–µ—Ç—ã, —à–æ–∫–æ–ª–∞–¥)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–∞ (—Ä–µ–º–µ—à–∫–∏, –∫–∞—Ä–∞–Ω–¥–∞—à–∏, –º–∏—à–∫–∏)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–µ—Å–∞ (15–≥, 1000–≥)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–∫—É—Å–∞ (–∫–ª—É–±–Ω–∏–∫–∞, –∞—Ä–±—É–∑)
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º —á–∏—Å–ª–æ–≤—ã–µ –∫–æ–¥—ã –≤ slug
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –∫–∞–∫ –æ—Å–Ω–æ–≤—É

#### 3. –í–ò–ó–£–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó (35% –≤–µ—Å–∞) - –ö–†–ò–¢–ò–ß–ù–û
- ‚úÖ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ 50KB - 2MB)
- ‚úÖ Aspect ratio (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ 0.8 - 1.5)
- ‚úÖ Perceptual hash –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–µ–π)

**–ö–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:** –†–∞–∑–ª–∏—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

#### 4. –ö–û–ù–¢–ï–ö–°–¢–ù–´–ô –ê–ù–ê–õ–ò–ó (10% –≤–µ—Å–∞)
- ‚úÖ –ù–∞–ª–∏—á–∏–µ docx —Ñ–∞–π–ª–∞ (–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞)
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—É—Ç–∏ (–Ω–µ—Ç temp/tmp/test)
- ‚úÖ –ù–∞–ª–∏—á–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –≠–¢–ê–ü 3: –°–û–ó–î–ê–ù–ò–ï –ü–†–û–î–£–ö–¢–ê

**–£—Å–ª–æ–≤–∏—è:**
- –°–æ–≤–æ–∫—É–ø–Ω—ã–π score ‚â• 0.65 (65%)
- –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–æ
- Immutable slug —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω
- –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏

**Slug —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑:**
1. –ë—Ä–µ–Ω–¥ (–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫)
2. –¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞ (—Ä–µ–º–µ—à–∫–∏, –∫–∞—Ä–∞–Ω–¥–∞—à–∏)
3. –í–∫—É—Å/—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ (–∫–ª—É–±–Ω–∏–∫–∞, –∞—Ä–±—É–∑)
4. –í–µ—Å (15gr, 1000gr)

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- ‚ùå –ß–∏—Å–ª–æ–≤—ã–µ –∫–æ–¥—ã (1753, 8542)
- ‚ùå –ò–º—è —Ñ–∞–π–ª–∞
- ‚ùå –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## –í—ã–±–æ—Ä –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

–ò–∑ –≥—Ä—É–ø–ø—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –æ–¥–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º:

1. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** (40% –≤–µ—Å–∞)
   - –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: 100KB - 1MB
   - –ü—Ä–∏–µ–º–ª–µ–º–æ: 50KB - 2MB

2. **Aspect ratio** (30% –≤–µ—Å–∞)
   - –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: 0.9 - 1.1 (–∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ/–ø–æ—á—Ç–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ)
   - –ü—Ä–∏–µ–º–ª–µ–º–æ: 0.8 - 1.2

3. **–ò–º—è —Ñ–∞–π–ª–∞** (30% –≤–µ—Å–∞)
   - –ë–æ–Ω—É—Å: –±–µ–∑ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–ª–æ–≤ (—É–ø–∞–∫–æ–≤–∫–∞, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, –∫–æ—Ä–æ–±–∫–∞, 2, 3, back, side)
   - –®—Ç—Ä–∞—Ñ: –Ω–∞–ª–∏—á–∏–µ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–ª–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –í–∞—Ä–∏–∞–Ω—Ç—ã –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞

**–í—Ö–æ–¥:**
```
1753 –ö–∏—Å–ª—ã–µ –†–µ–º–µ—à–∫–∏ ( –ê—Ä–±—É–∑ )/
  ‚îú‚îÄ‚îÄ 1753 –ê—Ä–±—É–∑ 1.webp
  ‚îú‚îÄ‚îÄ 1753 –ê—Ä–±—É–∑ 2.webp
  ‚îî‚îÄ‚îÄ –ö–∏—Å–ª—ã–µ —Ä–µ–º–µ—à–∫–∏ DAMLA,–ê—Ä–±—É–∑,–∫–æ—Ä–æ–±–∫–∞ 15–≥—Ä72—à—Ç6–±–ª Tayash ‚Ññ1753.webp
```

**–ê–Ω–∞–ª–∏–∑:**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: [1753 –ê—Ä–±—É–∑ 1, 1753 –ê—Ä–±—É–∑ 2] - –ø–æ—Ö–æ–∂–∏ (0.92)
- –£–ø–∞–∫–æ–≤–∫–∞ - –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –≥—Ä—É–ø–ø–µ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ö–æ–∂–µ—Å—Ç–∏)
- –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π score: 0.85 (—Ö–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π score: 0.80 (–≤—Å–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –Ω–∞–π–¥–µ–Ω—ã)
- –í–∏–∑—É–∞–ª—å–Ω—ã–π score: 0.75 (—Ö–æ—Ä–æ—à–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π score: 0.60 (–µ—Å—Ç—å docx)
- **–û–±—â–∏–π score: 0.76** ‚Üí –°–û–ó–î–ê–¢–¨

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û–î–ò–ù –ø—Ä–æ–¥—É–∫—Ç: `tayas-remeshki-arbuz-15gr`
- –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: `1753 –ê—Ä–±—É–∑ 1.webp` (–ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ)

### –ü—Ä–∏–º–µ—Ä 2: –†–∞–∑–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ

**–í—Ö–æ–¥:**
```
–ö–∞—Ç–µ–≥–æ—Ä–∏—è/
  ‚îú‚îÄ‚îÄ –ü—Ä–æ–¥—É–∫—Ç A 1.webp (phash: aaa111)
  ‚îú‚îÄ‚îÄ –ü—Ä–æ–¥—É–∫—Ç A 2.webp (phash: aaa112) ‚Üê –ø–æ—Ö–æ–∂ (0.95)
  ‚îú‚îÄ‚îÄ –ü—Ä–æ–¥—É–∫—Ç B 1.webp (phash: bbb222) ‚Üê –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è (0.2)
  ‚îî‚îÄ‚îÄ –ü—Ä–æ–¥—É–∫—Ç B 2.webp (phash: bbb223) ‚Üê –ø–æ—Ö–æ–∂ –Ω–∞ bbb222 (0.94)
```

**–ê–Ω–∞–ª–∏–∑:**
- –ì—Ä—É–ø–ø–∞ 1: [–ü—Ä–æ–¥—É–∫—Ç A 1, –ü—Ä–æ–¥—É–∫—Ç A 2] - score 0.82 ‚Üí –°–û–ó–î–ê–¢–¨
- –ì—Ä—É–ø–ø–∞ 2: [–ü—Ä–æ–¥—É–∫—Ç B 1, –ü—Ä–æ–¥—É–∫—Ç B 2] - score 0.78 ‚Üí –°–û–ó–î–ê–¢–¨

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–í–ê –ø—Ä–æ–¥—É–∫—Ç–∞: `product-a` –∏ `product-b`

### –ü—Ä–∏–º–µ—Ä 3: –û–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–í—Ö–æ–¥:**
```
–°–ª—É–∂–µ–±–Ω–∞—è –ø–∞–ø–∫–∞/
  ‚îî‚îÄ‚îÄ image.webp
```

**–ê–Ω–∞–ª–∏–∑:**
- –ù–µ—Ç –≥—Ä—É–ø–ø—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ù–µ—Ç docx —Ñ–∞–π–ª–∞
- –ù–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
- Score: 0.35 < 0.65 ‚Üí –ù–ï –°–û–ó–î–ê–í–ê–¢–¨

## –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫:
1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ immutable slug
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º perceptual hash –≥–ª–∞–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –ï—Å–ª–∏ slug –∏–ª–∏ hash —É–∂–µ –µ—Å—Ç—å ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
4. –ù–∏–∫–∞–∫–∏—Ö -1, -2, -3 –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

### Immutable slug:
- –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –∏–∑ —É—Å—Ç–æ–π—á–∏–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–ü—Ä–∏–Ω—Ü–∏–ø:** –õ—É—á—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å, —á–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º—É—Å–æ—Ä

- –ï—Å–ª–∏ score < 0.65 ‚Üí –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å
- –ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è ‚Üí –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å
- –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚Üí –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å
- –ï—Å–ª–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã ‚Üí –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å

## –ó–∞–ø—É—Å–∫

### Windows (bat-—Ñ–∞–π–ª)
–î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ `scripts/run-image-aware-import.bat`

### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
```cmd
cd "C:\Users\Galax\OneDrive\–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª\Atv_gro"
node scripts\image-aware-product-ingestion.js
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```javascript
CONFIG = {
  SCORING: {
    MIN_SCORE: 0.65,              // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π score –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
    STRUCTURAL_WEIGHT: 0.30,       // –í–µ—Å —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
    SEMANTIC_WEIGHT: 0.25,         // –í–µ—Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
    VISUAL_WEIGHT: 0.35,           // –í–µ—Å –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
    CONTEXT_WEIGHT: 0.10           // –í–µ—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
  },
  VISUAL: {
    SIMILARITY_THRESHOLD: 0.85,    // –ü–æ—Ä–æ–≥ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
    DIFFERENCE_THRESHOLD: 0.50,     // –ü–æ—Ä–æ–≥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    MIN_IMAGE_SIZE: 5000,
    MAX_IMAGE_SIZE: 10 * 1024 * 1024,
    OPTIMAL_ASPECT_RATIO: { min: 0.8, max: 1.5 }
  },
  GROUPING: {
    MIN_IMAGES_IN_GROUP: 1,
    MAX_IMAGES_IN_GROUP: 10,
    OPTIMAL_IMAGES_IN_GROUP: { min: 2, max: 5 }
  }
}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –¢–û–õ–¨–ö–û —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚úÖ –í–∞—Ä–∏–∞–Ω—Ç—ã —É–ø–∞–∫–æ–≤–æ–∫/—Ä–∞–∫—É—Ä—Å–æ–≤ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ –æ–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç
‚úÖ –°–ª—É–∂–µ–±–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
‚úÖ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ —Ñ–æ—Ç–æ –Ω–µ —Å–æ–∑–¥–∞—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚úÖ –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∑–∞–ø—É—Å–∫–∞–º
‚úÖ Slug immutable –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π
‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

## –û—Ç–ª–∏—á–∏—è –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
|--------|---------------|--------------|
| –û–±—Ä–∞–±–æ—Ç–∫–∞ | –ö–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| –í–∏–∑—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ | –ë–∞–∑–æ–≤—ã–π hash | Perceptual hash + —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ |
| –í—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | –ü–µ—Ä–≤–æ–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–µ | –õ—É—á—à–µ–µ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º |
| –î—É–±–ª–∏–∫–∞—Ç—ã | –ü–æ –ø—É—Ç–∏ —Ñ–∞–π–ª–∞ | –ü–æ perceptual hash |
| Slug | –ú–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è | Immutable |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ | –¢–æ–ª—å–∫–æ –ø—Ä–∏ score ‚â• 0.65 |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js (–≤–µ—Ä—Å–∏—è 12 –∏–ª–∏ –≤—ã—à–µ)
- –¢–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ (fs, path, crypto)
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `foods/` —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –§–∞–π–ª `data/products.json`

## –†–∞–∑–≤–∏—Ç–∏–µ

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π perceptual hash**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
2. **–ü–∞—Ä—Å–∏–Ω–≥ WebP**: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**: –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è scoring
4. **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤


