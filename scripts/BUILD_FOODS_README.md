# üöÄ BUILD PRODUCTS FROM FOODS

–ï–¥–∏–Ω—ã–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π pipeline –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –ø–∞–ø–∫–∏ `./foods`.

## üìã –û–ü–ò–°–ê–ù–ò–ï

–°–∫—Ä–∏–ø—Ç `build-products-from-foods.js` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–ø–∫—É `./foods` –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
- `data/products.json` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Å–∞–π—Ç–∞
- `out/products/<id>.json` - –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–æ–≤–∞—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `out/products.json` - —Å–∫–ª–µ–π–∫–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- `out/issues.json` - –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
- `out/report.json` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîß –£–°–¢–ê–ù–û–í–ö–ê

```bash
npm install
```

–¢—Ä–µ–±—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `fast-glob` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `image-size` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `blockhash-core` - perceptual hash –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `mammoth` - –ø–∞—Ä—Å–∏–Ω–≥ DOCX —Ñ–∞–π–ª–æ–≤
- `pdf-parse` - –ø–∞—Ä—Å–∏–Ω–≥ PDF —Ñ–∞–π–ª–æ–≤
- `antiword` - –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ä—ã—Ö DOC —Ñ–∞–π–ª–æ–≤ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ)

## üöÄ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

```bash
npm run build:foods
```

## üìÅ –°–¢–†–£–ö–¢–£–†–ê FOODS

–û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
foods/
  01 Tayas/
    01 –ú–∞—Ä–º–µ–ª–∞–¥—ã/
      ...
  02 Pakel/
    ...
  09 Crafers/
    ...
```

## ‚ú® –û–°–û–ë–ï–ù–ù–û–°–¢–ò

### 1. –î–µ—Ç–µ–∫—Ü–∏—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏ –∏—Å–∫–ª—é—á–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–º 478√ó58 –ø–∏–∫—Å–µ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `image-size` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤

### 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ SKU
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:
1. –ë—É–∫–≤–µ–Ω–Ω–æ-—Ü–∏—Ñ—Ä–æ–≤—ã–µ: `PL1048`, `BS0001`, `AF0006`, `SL0002`, `PF0003`, `KA0006`, `KF0013`
2. –° —Å–∏–º–≤–æ–ª–æ–º ‚Ññ: `‚Ññ 1420`, `‚Ññ1420`
3. –û—Ç–¥–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ 3-6 —Ü–∏—Ñ—Ä (–∏—Å–∫–ª—é—á–∞—è –≤–µ—Å–∞: 15, 75, 100, 150, 300, 700, 1000)

### 3. –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **DOCX**: —á–µ—Ä–µ–∑ `mammoth.extractRawText`
- **PDF**: —á–µ—Ä–µ–∑ `pdf-parse`
- **DOC**: —á–µ—Ä–µ–∑ `antiword` (—Å–∏—Å—Ç–µ–º–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∞–±–∑–∞—Ü–µ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ: —Å–æ—Å—Ç–∞–≤, –ø–∏—â–µ–≤–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å, —É–ø–∞–∫–æ–≤–∫–∞

### 4. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- –ó–∞–ø—è—Ç—ã–µ –≤ —á–∏—Å–ª–∞—Ö ‚Üí —Ç–æ—á–∫–∏ (49,3 ‚Üí 49.3)
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–µ–ª–æ–≤
- –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ –ª–∞—Ç–∏–Ω–∏—Ü—É –¥–ª—è ID

### 5. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö –ø—É—Ç–µ–π Windows
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `\\?\` –¥–ª—è –ø—É—Ç–µ–π >260 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö

### 6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º
- –¢–æ–≤–∞—Ä—ã –±–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–∫ ‚Üí `flags.missing_text=true`
- –¢–æ–≤–∞—Ä—ã –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ‚Üí `flags.missing_images=true`
- –¢–æ–≤–∞—Ä—ã –±–µ–∑ SKU ‚Üí `flags.no_sku=true`
- –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `out/issues.json`

## üìä –í–´–•–û–î–ù–´–ï –§–ê–ô–õ–´

### data/products.json
–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–ª—è —Å–∞–π—Ç–∞:
```json
{
  "products": [...],
  "categories": {},
  "brands": []
}
```

### out/products.json
–ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞.

### out/issues.json
–°–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤:
```json
[
  {
    "productId": "...",
    "issue": "missing_text",
    "path": "..."
  }
]
```

### out/report.json
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
```json
{
  "timestamp": "...",
  "stats": {
    "totalFiles": 1000,
    "imagesFound": 500,
    "docsFound": 300,
    "placeholdersRemoved": 19,
    "productsCreated": 200,
    ...
  }
}
```

## üîÑ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° EXPORT

–°–∫—Ä–∏–ø—Ç `exportProducts.js` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `data/products.json`:
- –ï—Å–ª–∏ `out/products` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `data/products.json`
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å `npm run build:foods` –¥–ª—è –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## ‚ö†Ô∏è –í–ê–ñ–ù–û

1. **Antiword –¥–ª—è DOC**: –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç–∞—Ä—ã—Ö `.doc` —Ñ–∞–π–ª–æ–≤ –Ω—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ `antiword`
   - Windows: —Å–∫–∞—á–∞—Ç—å —Å https://www.winfield.demon.nl/
   - Linux: `sudo apt-get install antiword`
   - macOS: `brew install antiword`

2. **–î–ª–∏–Ω–Ω—ã–µ –ø—É—Ç–∏**: –ù–∞ Windows –ø—É—Ç–∏ >260 —Å–∏–º–≤–æ–ª–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `\\?\` –ø—Ä–µ—Ñ–∏–∫—Å

3. **–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è 478√ó58 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è (19 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤)

4. **–ë–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–∫**: –¢–æ–≤–∞—Ä—ã –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–µ –ª–æ–º–∞—é—Ç pipeline, –ø–æ–º–µ—á–∞—é—Ç—Å—è —Ñ–ª–∞–≥–æ–º `missing_text`

## üêõ –û–¢–õ–ê–î–ö–ê

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–∞–ø–∫–∏ `foods/` —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏ –±—Ä–µ–Ω–¥–∞–º–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `out/report.json` –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `out/issues.json` –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–±–ª–µ–º

## üìù –ü–†–ò–ú–ï–†–´

### –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```bash
npm run build:foods
```

### –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤
```bash
npm run export
```

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workflow
```bash
# 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ foods/
npm run build:foods

# 2. –≠–∫—Å–ø–æ—Ä—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm run export
```

