# üîÑ –î–ï–î–£–ü–õ–ò–ö–ê–¶–ò–Ø –¢–û–í–ê–†–û–í

## üìã –û–ü–ò–°–ê–ù–ò–ï

–°–∫—Ä–∏–ø—Ç `deduplicate-products.js` –Ω–∞—Ö–æ–¥–∏—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–í–°–ï –¥—É–±–ª–∏–∫–∞—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤** –≤ `products.json`.

## üéØ –¶–ï–õ–¨

–ü–æ–ª—É—á–∏—Ç—å **—á–∏—Å—Ç—ã–π, –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–π** `products.json` –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –Ω–æ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤.

## üîç –ß–¢–û –°–ß–ò–¢–ê–ï–¢–°–Ø –î–£–ë–õ–ò–ö–ê–¢–û–ú

–¢–æ–≤–∞—Ä—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏, –µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç **‚â•2 –∏–∑ —É—Å–ª–æ–≤–∏–π**:

1. ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—ã–π brand** (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π)
2. ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è**
3. ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤–µ—Å** / –≥—Ä–∞–º–º–æ–≤–∫–∞
4. ‚úÖ **–°—Ö–æ–∂–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ** (Levenshtein distance ‚â•70%)
5. ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—ã–π image** (–∏–ª–∏ –ø–æ—á—Ç–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø—É—Ç—å)
6. ‚úÖ **–°–æ–≤–ø–∞–¥–∞—é—â–∏–π –Ω–∞–±–æ—Ä tags** (‚â•70% –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è)

## üîÑ –õ–û–ì–ò–ö–ê –û–ë–†–ê–ë–û–¢–ö–ò

### –ï–°–õ–ò —ç—Ç–æ –û–î–ò–ù –ò –¢–û–¢ –ñ–ï –¢–û–í–ê–† (–¥—É–±–ª–∏–∫–∞—Ç—ã):
- ‚úÖ –û—Å—Ç–∞–≤–ª—è–µ–º **1 –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç**
- ‚úÖ –û–±—ä–µ–¥–∏–Ω—è–µ–º **tags** (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º **—Å–∞–º—ã–π –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π image** (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª)
- ‚úÖ –£–¥–∞–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–µ `mergedFrom` —Å ID —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

### –ï–°–õ–ò —ç—Ç–æ –í–ê–†–ò–ê–ù–¢–´ —Ç–æ–≤–∞—Ä–∞ (—Ä–∞–∑–Ω—ã–µ –≤–µ—Å/–≤–∫—É—Å/—Ñ–æ—Ä–º–∞):
- ‚úÖ –û—Å—Ç–∞–≤–ª—è–µ–º **–≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã**
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º **id**: `brand-product-type-weight`
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –≤ **tags** —Ä–∞–∑–ª–∏—á–∏—è (weight, flavor, shape)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º `legacyId` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ID

## üöÄ –ó–ê–ü–£–°–ö

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –±–∞—Ç–Ω–∏–∫ (Windows)
```bash
scripts\run-deduplicate.bat
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Node.js
```bash
node scripts\deduplicate-products.js
```

## üìä –û–¢–ß–ï–¢

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç:

1. **–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –¢–æ–≤–∞—Ä–æ–≤ –î–û –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
   - –¢–æ–≤–∞—Ä–æ–≤ –ü–û–°–õ–ï –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
   - –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–æ –≥—Ä—É–ø–ø
   - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
   - –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

2. **–ü—Ä–∏–º–µ—Ä—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:**
   - –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ–≤–∞—Ä–æ–≤
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π —Ç–æ–≤–∞—Ä –æ—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π

3. **–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏:**
   - –ì—Ä—É–ø–ø—ã —Å >3 –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏
   - –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã ID –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
   - –¢—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

## üìÅ –§–ê–ô–õ–´

- `scripts/deduplicate-products.js` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
- `scripts/deduplicate-report.json` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
- `data/products.backup-deduplicate.json` - backup –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- `data/products.json` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

## ‚öôÔ∏è –ê–õ–ì–û–†–ò–¢–ú

### 1. –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –ø–∞—Ä–∞–º —Ç–æ–≤–∞—Ä–æ–≤
- –í—ã—á–∏—Å–ª—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ 6 –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã —Å ‚â•2 —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- **–î—É–±–ª–∏–∫–∞—Ç—ã**: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã (–æ–±—ä–µ–¥–∏–Ω—è–µ–º)
- **–í–∞—Ä–∏–∞–Ω—Ç—ã**: —Ä–∞–∑–Ω—ã–µ –≤–µ—Å/–≤–∫—É—Å/—Ñ–æ—Ä–º–∞ (–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º ID)

### 3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –í—ã–±–∏—Ä–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–≤–∞—Ä (—Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª–µ–π)
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ tags
- –í—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π image (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª)
- –£–¥–∞–ª—è–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏

### 4. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π ID: `brand-type-weight-flavor`
- –û–±–Ω–æ–≤–ª—è–µ—Ç tags —Å —Ä–∞–∑–ª–∏—á–∏—è–º–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `legacyId` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

## ‚ö†Ô∏è –í–ê–ñ–ù–û

1. **Backup —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. **–ù–µ —É–¥–∞–ª—è–µ—Ç —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏** - —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏ –≤ –æ—Ç—á–µ—Ç
3. **–ù–µ –ª–æ–º–∞–µ—Ç —Å–≤—è–∑–∏ image ‚Üî product** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã** - –Ω–µ —É–¥–∞–ª—è–µ—Ç —Ä–∞–∑–Ω—ã–µ –≤–µ—Å/–≤–∫—É—Å/—Ñ–æ—Ä–º–∞
5. **–î–æ–±–∞–≤–ª—è–µ—Ç `mergedFrom`** - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã)
- ‚úÖ –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (—Ä–∞–∑–Ω—ã–µ –≤–µ—Å/–≤–∫—É—Å/—Ñ–æ—Ä–º–∞)
- ‚úÖ ID –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
- ‚úÖ Tags –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ Image –ø—É—Ç–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –ß–∏—Å—Ç—ã–π, –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–π JSON

## üìà –ü–†–ò–ú–ï–†–´

### –ü—Ä–∏–º–µ—Ä 1: –î—É–±–ª–∏–∫–∞—Ç—ã
```
–î–û:
- damla-bears-80gr (image: assets/.../damla-bears.webp)
- damla-bears-80gr-v2 (image: assets/.../damla-bears-2.webp)
- damla-mishki-80gr (image: assets/.../damla-bears.webp)

–ü–û–°–õ–ï:
- damla-bears-80gr (mergedFrom: ["damla-bears-80gr-v2", "damla-mishki-80gr"])
```

### –ü—Ä–∏–º–µ—Ä 2: –í–∞—Ä–∏–∞–Ω—Ç—ã
```
–î–û:
- damla-bears-15gr
- damla-bears-80gr
- damla-bears-1000gr

–ü–û–°–õ–ï:
- damla-bears-15gr (tags: [...existing, "15gr"])
- damla-bears-80gr (tags: [...existing, "80gr"])
- damla-bears-1000gr (tags: [...existing, "1000gr"])
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-XX
**–í–µ—Ä—Å–∏—è**: 1.0 (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤)




