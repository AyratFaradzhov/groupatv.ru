# Индекс популярности товара (popularityIndex)

## Назначение

Поле **`popularityIndex`** — это **невидимая** служебная переменная в каждом объекте товара в `data/products.json`. Она не отображается на сайте (ни в карточке, ни в модальном окне, ни во вкладке «Разработка») и используется **только для сортировки** при нажатии кнопки **«По популярности»**.

- Чем **меньше** число — тем **выше** товар в списке (1 = первый, 2 = второй и т.д.).
- Товары **без** `popularityIndex` при сортировке по популярности оказываются в конце списка.

## Где задаётся

В файле **`data/products.json`** у каждого элемента массива `products` можно добавить поле `popularityIndex` (целое число).

## Как добавить индекс популярности

### Пример объекта товара с индексом

```json
{
  "id": "sl0001",
  "name": "Кукурузные трубочки TWIN с шоколадно-кремовой начинкой",
  "nameRu": "Кукурузные трубочки TWIN с шоколадно-кремовой начинкой",
  "nameEn": "Кукурузные трубочки TWIN с шоколадно-кремовой начинкой",
  "brand": "sulifa",
  "category": "waffles",
  "image": "foods_normalized_v2/.../main.webp",
  "sku": "SL0001",
  "type": "tubes",
  "flavor": "sweet",
  "weight": "18 грамм",
  "popularityIndex": 1,
  "flags": { ... },
  "sourcePath": "...",
  "nutrition": { ... }
}
```

### Правила

| Значение              | Поведение при сортировке «По популярности» |
|-----------------------|---------------------------------------------|
| `"popularityIndex": 1` | Товар показывается первым.                 |
| `"popularityIndex": 2` | Вторым.                                    |
| `"popularityIndex": 3` | Третьим.                                   |
| …                     | И так далее по возрастанию.                |
| Поле отсутствует      | Товар уходит в конец списка.                |

### Рекомендации

1. Задавайте **уникальные** значения для товаров, которые должны иметь фиксированный порядок (1, 2, 3, …).
2. Можно использовать «дыры» в нумерации (например, 10, 20, 30), чтобы потом вставлять новые товары без сдвига всех номеров.
3. Не используйте отрицательные числа — сортировка идёт по возрастанию.

## Сортировка на странице «Продукция»

- **По популярности** — список упорядочивается по полю `popularityIndex` (меньше число → выше в списке). Повторное нажатие снимает сортировку.
- **По алфавиту** — список упорядочивается по названию товара (по `nameRu` / `name` / `nameEn` в зависимости от языка). Повторное нажатие снимает сортировку.

Поле `popularityIndex` нигде на сайте не отображается и нужно только для корректной работы кнопки «По популярности».
